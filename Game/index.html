<!doctype html>
<meta charset="utf-8">
<title>BTP600 - Assignment 2</title>

<body>
	<script src="pixi.js/bin/pixi.js"></script>
	<script type="text/javascript" src="supportlib.js"></script>
	<script src="Goblin.js"></script>
	<script src="Key.js"></script>
	<script src="Hero.js"></script>
  <script src="Door.js"></script>
  <script src="Room.js"></script>
  <script src="Dungeon.js"></script>

	<script type="text/javascript">
		var stage = new PIXI.Stage(0x000000);
		var renderer = PIXI.autoDetectRenderer(
			512, 512, {
				antialiasing: false,
				transparent: false,
				resolution: 1
			}
		);

		document.body.appendChild(renderer.view);

		// Load tileset
		var loader = new PIXI.AssetLoader([
			"assets/tileset.png",
			"assets/dungeon.png",
			"assets/goblin.png",
			"assets/key.png",
			"assets/door-tile.png"
		]);

		loader.onComplete = setup;

		loader.load();

		var
      dungeon;

		// Function to load tileset and use sprite from it.
		function setup() {
			// Setting up scenes
			// gamePlayScene = new PIXI.DisplayObjectContainer();
			// gameOverScene = new PIXI.DisplayObjectContainer();

   //    room = new Room();
      dungeon = new Dungeon(stage);
   //    room.setDoor({north: true, south: true, west: false, east: false});
   //    gamePlayScene = room.getRoom();

			// stage.addChild(gamePlayScene);


			//Render the stage
			renderer.render(stage);

			//Start the game loop
			gameLoop();
		}

		function gameLoop() {

			//Loop this function at 60 frames per second
			requestAnimationFrame(gameLoop);

			//Update the current game state
			dungeon.play();

			//Render the stage to see the animation
			renderer.render(stage);
		}



	</script>
</body>